<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSwap - Share & Learn Together 🚀</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/your-fontawesome-kit.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Welcome Modal -->
    <div id="welcomeModal" class="modal">
        <div class="modal-content welcome-modal">
            <div class="welcome-header">
                <h1>🌟 Welcome to SkillSwap!</h1>
                <p id="guestWelcome">Ready to learn or share a skill?</p>
            </div>
            <div class="welcome-actions">
                <button id="startButton" class="btn btn-primary">🚀 Let's Get Started!</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <h1>🔄 SkillSwap</h1>
                </div>
                <div class="user-info">
                    <span id="userDisplay" class="username-badge"></span>
                </div>
            </div>
        </header>

        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <ul class="nav-list">
                <li class="nav-item active" data-section="learn">
                    <i class="fas fa-graduation-cap"></i>
                    <span>🧠 Skills to Learn</span>
                </li>
                <li class="nav-item" data-section="share">
                    <i class="fas fa-lightbulb"></i>
                    <span>💡 Skills to Share</span>
                </li>
                <li class="nav-item" data-section="requests">
                    <i class="fas fa-paper-plane"></i>
                    <span>✉️ Requests Sent</span>
                    <span id="requestsCount" class="badge">0</span>
                </li>
                <li class="nav-item" data-section="chat">
                    <i class="fas fa-comments"></i>
                    <span>💬 Chat</span>
                    <span id="chatNotifications" class="badge notification-badge hidden">0</span>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Skills to Learn Section -->
            <section id="learnSection" class="content-section active">
                <div class="section-header">
                    <h2>🧠 Skills to Learn</h2>
                    <p>Discover amazing skills shared by the community!</p>
                </div>
                <div class="skills-grid" id="skillsGrid">
                    <!-- Skills will be dynamically loaded here -->
                </div>
                <div id="noSkillsMessage" class="empty-state">
                    <div class="empty-icon">🎯</div>
                    <h3>No skills available yet</h3>
                    <p>Be the first to share a skill with the community!</p>
                </div>
            </section>

            <!-- Skills to Share Section -->
            <section id="shareSection" class="content-section">
                <div class="section-header">
                    <h2>💡 Share Your Skills</h2>
                    <p>Help others learn something new!</p>
                </div>
                <div class="share-form-container">
                    <form id="shareSkillForm" class="share-form">
                        <div class="form-group">
                            <label for="skillTitle">Skill Title</label>
                            <input type="text" id="skillTitle" placeholder="e.g., Video Editing, Guitar Playing, Cooking..." required>
                        </div>
                        <div class="form-group">
                            <label for="skillDescription">Description</label>
                            <textarea id="skillDescription" rows="4" placeholder="Tell others what you can teach them and how you can help..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-share">
                            🚀 Share Skill
                        </button>
                    </form>
                </div>
                <div id="mySkills" class="my-skills">
                    <h3>Your Shared Skills</h3>
                    <div id="mySkillsList" class="skills-grid">
                        <!-- User's skills will be shown here -->
                    </div>
                </div>
            </section>

            <!-- Requests Section -->
            <section id="requestsSection" class="content-section">
                <div class="section-header">
                    <h2>✉️ Your Requests</h2>
                    <p>Track your learning requests</p>
                </div>
                <div id="requestsList" class="requests-list">
                    <!-- Requests will be shown here -->
                </div>
                <div id="noRequestsMessage" class="empty-state">
                    <div class="empty-icon">📮</div>
                    <h3>No requests sent yet</h3>
                    <p>Browse skills and send your first learning request!</p>
                </div>
            </section>

            <!-- Chat Section -->
            <section id="chatSection" class="content-section">
                <div class="section-header">
                    <h2>💬 Chat</h2>
                    <p>Connect with skill sharers</p>
                </div>
                <div id="chatList" class="chat-list">
                    <!-- Chat rooms will be shown here -->
                </div>
                <div id="noChatMessage" class="empty-state">
                    <div class="empty-icon">💭</div>
                    <h3>No active chats</h3>
                    <p>Start by requesting to learn a skill!</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Request Modal -->
    <div id="requestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>📩 Request to Learn</h3>
                <button class="close-btn" id="closeRequestModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="requestSkillInfo"></p>
                <textarea id="requestMessage" placeholder="Hi! I'd love to learn this skill from you. When would be a good time to connect?" rows="4"></textarea>
            </div>
            <div class="modal-footer">
                <button id="cancelRequest" class="btn btn-secondary">Cancel</button>
                <button id="sendRequest" class="btn btn-primary">📤 Send Request</button>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="modal">
        <div class="modal-content chat-modal">
            <div class="modal-header">
                <h3 id="chatTitle">💬 Chat</h3>
                <button class="close-btn" id="closeChatModal">&times;</button>
            </div>
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages">
                    <!-- Messages will appear here -->
                </div>
                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="Type your message...">
                    <button id="sendMessage" class="btn btn-primary">📨</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
    </div>

    <!-- Scripts -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/utils.js"></script>
    <script>
        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });
    </script>
</body>
</html>
